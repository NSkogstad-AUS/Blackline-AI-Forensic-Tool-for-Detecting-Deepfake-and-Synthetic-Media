.reports-page {
  padding: 12px 8px;
}

.reports-inner { max-width: 1280px; margin: 0 auto; }
.reports-header { display:flex; justify-content:space-between; align-items:flex-end; flex-wrap:wrap; gap:24px; margin-bottom:8px; }

.reports-page h2 {
  margin: 0 0 6px 0;
}

.reports-page .muted {
  color: #6b7280;
  margin-bottom: 18px;
}

.heatmap {
  width: 100%;
  max-width: 960px;
  background: #ffffff;
  padding: 20px;
  border-radius: 6px;
  box-shadow: 0 4px 14px rgba(12,12,20,0.06);
}

.heatmap-row {
  display: flex;
  gap: 6px;
  margin-bottom: 6px;
}

.heatcell {
  width: 44px;
  height: 28px;
  border-radius: 4px;
  background: #f3f4f6;
}

.heatcell.intensity-0 { background: #f3f4f6; }
.heatcell.intensity-1 { background: #fde68a; }
.heatcell.intensity-2 { background: #fca5a5; }
.heatcell.intensity-3 { background: #fb7185; }
.heatcell.intensity-4 { background: #ef4444; }

/* New analysis table styles */
.report-stats { display: flex; gap: 18px; flex-wrap: wrap; margin: 0 0 22px 0; justify-content: center; }
.report-stats .stat { background:#fff; padding:14px 18px; border:1px solid #e5e7eb; border-radius:8px; min-width:140px; text-align:center; }
.report-stats .stat .label { font-size:12px; text-transform:uppercase; letter-spacing:.05em; color:#6b7280; margin-bottom:4px; }
.report-stats .stat .value { font-size:20px; font-weight:700; }

.analysis-table { width:100%; max-width:1180px; background:#fff; border:1px solid #e5e7eb; border-radius:10px; overflow:hidden; box-shadow:0 4px 14px rgba(12,12,20,0.05); }
.analysis-table .thead { background:#f3f4f6; font-weight:600; font-size:13px; }
.analysis-table .tr { display:grid; grid-template-columns: 44px 1.6fr 1fr 0.7fr 0.7fr 1.4fr 0.8fr 1fr; gap:0; align-items:center; padding:10px 16px; border-bottom:1px solid #e5e7eb; font-size:14px; }
.analysis-table .tr:last-child { border-bottom:none; }
.analysis-table .th { font-weight:600; }
.analysis-table .td { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.analysis-table .td.filename { display:flex; align-items:center; gap:8px; }
.analysis-table .td.sel, .analysis-table .th.sel { padding-right:8px; display:flex; align-items:center; }
.analysis-table input[type=checkbox] { width:16px; height:16px; cursor:pointer; }
.analysis-table .tbody .tr:nth-child(even) { background:#fcfcfd; }
.analysis-table .tbody .tr:hover { background:#f3f6fa; }
.analysis-table .tr.flagged { background:#fff5f5; }
.analysis-table .tr.flagged:hover { background:#ffecec; }
.analysis-table .tbody .tr.active { outline:2px solid var(--accent); outline-offset:-2px; }

.likelihood-cell { display:flex; align-items:center; gap:6px; }
.likelihood-meter { position:relative; flex:0 0 110px; height:10px; background:#e5e7eb; border-radius:999px; overflow:hidden; }
.likelihood-meter .fill { position:absolute; inset:0; width:0; background:linear-gradient(90deg,#60a5fa,#2563eb); transition:width .5s cubic-bezier(.4,0,.2,1); }
.likelihood-meter.alert .fill { background:linear-gradient(90deg,#f87171,#dc2626); }
/* bucket widths (0-100 step 5) */
.likelihood-meter.p0  .fill { width:0%; }
.likelihood-meter.p5  .fill { width:5%; }
.likelihood-meter.p10 .fill { width:10%; }
.likelihood-meter.p15 .fill { width:15%; }
.likelihood-meter.p20 .fill { width:20%; }
.likelihood-meter.p25 .fill { width:25%; }
.likelihood-meter.p30 .fill { width:30%; }
.likelihood-meter.p35 .fill { width:35%; }
.likelihood-meter.p40 .fill { width:40%; }
.likelihood-meter.p45 .fill { width:45%; }
.likelihood-meter.p50 .fill { width:50%; }
.likelihood-meter.p55 .fill { width:55%; }
.likelihood-meter.p60 .fill { width:60%; }
.likelihood-meter.p65 .fill { width:65%; }
.likelihood-meter.p70 .fill { width:70%; }
.likelihood-meter.p75 .fill { width:75%; }
.likelihood-meter.p80 .fill { width:80%; }
.likelihood-meter.p85 .fill { width:85%; }
.likelihood-meter.p90 .fill { width:90%; }
.likelihood-meter.p95 .fill { width:95%; }
.likelihood-meter.p100 .fill { width:100%; }
.pct-text { font-size:12px; font-weight:600; color:#374151; }
.pct-text.alert { color:#b91c1c; }

.analysis-detail { margin-top:24px; background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:20px 22px; box-shadow:0 4px 16px rgba(0,0,0,0.04); max-width:1180px; }
.analysis-detail .detail-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.analysis-detail .detail-title { margin:0; font-size:18px; }
.analysis-detail .detail-close { background:transparent; border:none; font-size:22px; line-height:1; cursor:pointer; padding:4px 8px; }
.analysis-detail .detail-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap:10px 18px; margin-bottom:18px; }
.analysis-detail .detail-grid .k { display:block; font-size:11px; text-transform:uppercase; letter-spacing:.05em; color:#6b7280; }
.analysis-detail .detail-grid .v { font-weight:600; font-size:14px; }
.analysis-detail .raw-block summary { cursor:pointer; font-weight:600; margin-bottom:8px; }
.analysis-detail .raw-block pre { background:#0f172a0d; padding:14px 16px; border-radius:8px; max-height:320px; overflow:auto; font-size:12px; }

:root.dark .analysis-detail { background:#0f172a; border-color: var(--border); box-shadow:0 4px 16px rgba(0,0,0,0.6); }
:root.dark .analysis-detail .detail-grid .k { color: var(--muted); }
:root.dark .analysis-detail .raw-block pre { background:#1e293b; }

.no-analyses { background:#fff; border:1px dashed #d1d5db; padding:24px 28px; border-radius:10px; font-size:14px; color:#6b7280; max-width:640px; }

/* Dark mode overrides */
:root.dark .report-stats .stat { background:#0f172a; border-color: var(--border); }
:root.dark .analysis-table { background:#0f172a; border-color: var(--border); }
:root.dark .analysis-table .thead { background:#1e293b; }
:root.dark .analysis-table .tr { border-color: var(--border); }
:root.dark .analysis-table .tbody .tr:nth-child(even) { background:#111c2a; }
:root.dark .analysis-table .tbody .tr:hover { background:#1e293b; }
:root.dark .analysis-table .tr.flagged { background:#2a1a1d; }
:root.dark .analysis-table .tr.flagged:hover { background:#3a2225; }
:root.dark .likelihood-meter { background:#1e293b; }
:root.dark .pct-text { color: var(--muted); }
:root.dark .pct-text.alert { color:#fca5a5; }
:root.dark .no-analyses { background:#0f172a; border-color: var(--border); color: var(--muted); }

/* Selection bar */
.selection-bar { display:flex; align-items:center; gap:12px; margin:0 0 10px 0; background:#fff; border:1px solid #e5e7eb; padding:8px 14px; border-radius:8px; max-width:1180px; }
.selection-bar .btn { font-size:13px; }
.btn.danger { background:#dc2626; color:#fff; }
.btn.danger:hover { background:#b91c1c; }
:root.dark .selection-bar { background:#0f172a; border-color: var(--border); }
:root.dark .btn.danger { background:#b91c1c; }
:root.dark .btn.danger:hover { background:#991b1b; }

/* Side layout for selection bar */
/* Floating selection bar (does not shift table) */
.analysis-table-wrapper { position:relative; }
.selection-bar.floating { position:absolute; left:-210px; top:0; width:190px; flex-direction:column; align-items:stretch; gap:10px; height:fit-content; }
.selection-bar.floating .sel-count { font-weight:600; font-size:14px; }
.selection-bar.floating .btn { width:100%; justify-content:center; }
@media (max-width: 1200px) {
  .selection-bar.floating { position:static; width:auto; flex-direction:row; left:auto; top:auto; margin-bottom:10px; }
  .selection-bar.floating .btn { width:auto; }
}

/* Modal */
.modal-overlay { position:fixed; inset:0; background:rgba(15,23,42,0.55); -webkit-backdrop-filter:saturate(160%) blur(4px); backdrop-filter:saturate(160%) blur(4px); display:flex; align-items:center; justify-content:center; z-index:2000; padding:24px; }
.modal { background:#fff; border:1px solid #e5e7eb; border-radius:14px; padding:26px 28px 24px; width:100%; max-width:440px; box-shadow:0 10px 32px rgba(0,0,0,0.12); animation:modPop .28s cubic-bezier(.4,0,.2,1); }
.modal h3 { margin:0 0 12px; font-size:20px; }
.modal-text { margin:0 0 22px; font-size:14px; line-height:1.45; color:#4b5563; }
.modal-actions { display:flex; justify-content:flex-end; gap:12px; }
@keyframes modPop { from { transform:translateY(8px); opacity:0; } to { transform:translateY(0); opacity:1; } }
:root.dark .modal { background:#0f172a; border-color:var(--border); box-shadow:0 10px 40px rgba(0,0,0,0.6); }
:root.dark .modal-text { color: var(--muted); }

/* Toast for undo */
.toast { position:fixed; bottom:20px; right:20px; background:#1f2937; color:#fff; padding:12px 16px; border-radius:10px; display:flex; align-items:center; gap:16px; box-shadow:0 6px 24px rgba(0,0,0,.25); font-size:14px; z-index:2100; }
.toast .btn.link { background:none; border:none; color:#60a5fa; font-weight:600; padding:4px 6px; cursor:pointer; }
.toast .btn.link:hover { text-decoration:underline; }
:root.dark .toast { background:#0f172a; }
